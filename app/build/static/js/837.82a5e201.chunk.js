"use strict";(self.webpackChunkhisvoice=self.webpackChunkhisvoice||[]).push([[837],{1837:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var r=s(5043),a=s(5561),l=s(6051),n=s(9577),i=s(849),c=s(9501),o=s(4154),d=s(1210),h=s(2156),m=s(3785),x=s(9379),g=s(992),p=s(2058),b=s(778),u=s(863),y=s(9591),j=s(1613),f=s(2491),N=s(3177),S=s(4611),v=s(579);const w=()=>{const{setActiveTab:e,setSelectedMessage:t,setRecentSermons:s,setSearchQuery:l}=(0,r.useContext)(a.u),[n,i]=(0,r.useState)(""),[c,o]=(0,r.useState)([]),[d,h]=(0,r.useState)({}),m=[...y.A,...j.A,...f.A,...N.A,...S.A];return(0,v.jsxs)("div",{className:"w-1/2 bg-opacity-50 bg-black backdrop-blur-sm flex flex-col ",style:{height:"100vh"},children:[(0,v.jsx)("div",{className:"sticky top-0 bg-opacity-30 bg-primary p-8 z-10 backdrop-blur-lg rounded-b-md pt-10",children:(0,v.jsx)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e=m.map((e=>{const t=new RegExp("(".concat(n,")"),"i"),s=e.sermon.match(t);if(s){const r=e.sermon.slice(Math.max(0,s.index-200),s.index),a=e.sermon.slice(s.index+s[0].length,s.index+s[0].length+200),l=e.sermon.slice(Math.max(0,s.index-30),s.index+s[0].length+30);return{id:e.id,title:e.title,year:e.year,location:e.location,shortSentence:l.replace(t,"<highlight class='highlight'>".concat(s[0],"</highlight>")),fullContext:{pre:r,match:s[0],post:a},sermon:e.sermon,type:e.type}}return null})).filter(Boolean);o(e),h({})})()},children:(0,v.jsxs)("div",{className:"flex items-end",children:[(0,v.jsx)("input",{type:"text",placeholder:"Search quotes within all sermons",className:"flex-grow p-2 text-lg border-b border-gray-300 focus:border-b-2 focus:border-gray-500 text-white placeholder-gray-300 bg-[transparent] outline-none",onChange:e=>i(e.target.value),value:n,style:{fontFamily:"cursive"}}),(0,v.jsx)(g.Ay,{type:"submit",icon:(0,v.jsx)(p.A,{}),className:"ml-2 bg-green-600",children:"Search"})]})})}),(0,v.jsxs)("div",{className:"flex-grow overflow-y-auto scrollbar-hidden p-4",children:[(0,v.jsx)("p",{className:"text-center font-sans text-sm italic text-white mb-4",style:{fontFamily:"cursive"},children:"Search for quotes across all sermons preached by Robert Lambert Lee"}),c.map(((r,a)=>(0,v.jsxs)("div",{className:"mb-4 p-3 bg-white bg-opacity-10 rounded-lg cursor-pointer hover:bg-opacity-20 transition-all",onClick:()=>(r=>{const a=m.find((e=>e.id===r.id));t(a),e("message"),l(n);const i=(JSON.parse(localStorage.getItem("recentSermons"))||[]).filter((e=>e.id!==a.id));i.unshift(a);const c=i.slice(0,15);localStorage.setItem("recentSermons",JSON.stringify(c)),s(c)})(r),children:[(0,v.jsx)("h3",{className:"text-white font-bold mb-2 text-[.9rem] ",children:r.title}),(0,v.jsxs)("div",{className:"relative",children:[d[r.id]?(0,v.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,v.jsx)("span",{className:"opacity-70",children:r.fullContext.pre}),(0,v.jsx)("highlight",{className:"highlight",children:r.fullContext.match}),(0,v.jsx)("span",{className:"opacity-70",children:r.fullContext.post})]}):(0,v.jsx)("p",{className:"text-gray-300 text-sm",dangerouslySetInnerHTML:{__html:r.shortSentence}}),(0,v.jsx)("button",{className:" right-0 bottom-0 flex items-center text-gray-300 hover:text-white transition-colors p-1 text-xs",onClick:e=>{return t=r.id,e.stopPropagation(),void h((e=>(0,x.A)((0,x.A)({},e),{},{[t]:!e[t]})));var t},children:d[r.id]?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Show Less"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.A,{className:"w-4 h-4 mr-1"}),"Show More"]})})]})]},"".concat(r.id,"-").concat(a))))]})]})},A=()=>{const{allSermons:e,loading:t,error:s,setActiveTab:x,setSelectedMessage:g,setRecentSermons:p}=(0,r.useContext)(a.u),[b,u]=(0,r.useState)(""),[y,j]=(0,r.useState)("title"),[f,N]=(0,r.useState)("ascend"),S=(0,r.useMemo)((()=>e.filter((e=>e.title.toString().toLowerCase().includes(b.toLowerCase())))),[e,b]),A=(0,r.useMemo)((()=>[...S].sort(((e,t)=>"year"===y?"ascend"===f?e.year-t.year:t.year-e.year:"ascend"===f?e[y].localeCompare(t[y]):t[y].localeCompare(e[y])))),[S,y,f]),C=e=>{y===e?N("ascend"===f?"descend":"ascend"):(j(e),N("ascend"))};return t?(0,v.jsx)("div",{children:"Loading sermons..."}):s?(0,v.jsxs)("div",{children:["Error: ",s]}):(0,v.jsxs)("div",{className:"flex min-h-screen font-sans bg-contain bg-center ",style:{backgroundImage:"\n          linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.8) 20%, rgba(0, 0, 0, 0.1) 100%),\n          url('./icon.png')\n        "},children:[(0,v.jsxs)("div",{className:"w-1/2 overflow-y-auto scrollbar-hidden  ",style:{height:"100vh"},children:[(0,v.jsxs)("div",{className:"sticky top-0 bg-opacity-80 bg-primary px-4 py-2 z-10 backdrop-blur-sm rounded-b-md pt-10 ",children:[(0,v.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"Sermon List"}),(0,v.jsxs)(l.A,{className:"mb-4",direction:"vertical",style:{width:"100%"},children:[(0,v.jsx)("input",{placeholder:"Search sermons",onChange:e=>{u(e.target.value)},className:"flex-grow p-2 text-lg border-b border-gray-300 focus:border-b-2 focus:border-gray-500 text-white placeholder-gray-300 bg-[transparent] outline-none",style:{width:"100%"}}),(0,v.jsxs)(l.A,{className:"w-full",children:[(0,v.jsx)(n.A,{title:"Sort by Title",children:(0,v.jsxs)("button",{onClick:()=>C("title"),className:"p-2 rounded text-white ".concat("title"===y?"bg-white bg-opacity-30":""),children:[(0,v.jsx)(i.A,{}),"title"===y&&("ascend"===f?(0,v.jsx)(c.A,{}):(0,v.jsx)(o.A,{}))]})}),(0,v.jsx)(n.A,{title:"Sort by Year",children:(0,v.jsxs)("button",{onClick:()=>C("year"),className:"p-2 rounded text-white ".concat("year"===y?"bg-white bg-opacity-30":""),children:[(0,v.jsx)(d.A,{}),"year"===y&&("ascend"===f?(0,v.jsx)(c.A,{}):(0,v.jsx)(o.A,{}))]})})]})]})]}),(0,v.jsx)("div",{className:"px-4 scrollbar-hidden pt-5 ",children:A.map((e=>(0,v.jsxs)("div",{className:"mb-4 border-b border-gray-500 pb-2 cursor-pointer hover:bg-[rgba(0,0,0,0.4)] ",onClick:()=>(e=>{g(e),x("message");const t=(JSON.parse(localStorage.getItem("recentSermons"))||[]).filter((t=>t.id!==e.id));t.unshift(e);const s=t.slice(0,15);localStorage.setItem("recentSermons",JSON.stringify(s)),p(s)})(e),children:[(0,v.jsx)("p",{className:"text-white text-[.8rem] font-medium",children:e.title}),(0,v.jsxs)("div",{className:"flex gap-3 text-gray-300",children:[(0,v.jsxs)("p",{className:"flex items-center text-xs font-mono",children:[(0,v.jsx)(d.A,{className:"mr-1 text-blue-500"})," ",e.year]}),(0,v.jsxs)("p",{className:"flex items-center text-xs font-mono",children:[(0,v.jsx)(h.A,{className:"mr-1"})," ",!e.location&&"N/A"]}),(0,v.jsx)("p",{className:"flex items-center text-xs",children:"mp3"===e.type?"\ud83d\udd0a":(0,v.jsx)(m.A,{size:12})})]})]},e.id)))})]}),(0,v.jsx)(w,{})]})}}}]);
//# sourceMappingURL=837.82a5e201.chunk.js.map