"use strict";(self.webpackChunkhisvoice=self.webpackChunkhisvoice||[]).push([[171],{9171:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var n=s(9379),r=s(5043),l=s(5173),a=s.n(l),o=s(5561),i=s(9195),c=s(992),d=s(3412),u=s(9135),x=s(7473),m=s(579);const h=()=>{const{selectedMessage:e,setActiveTab:t}=(0,r.useContext)(o.u),[s,n]=(0,r.useState)(!1),l=(0,r.useRef)(null),a="mp3"===e.type&&e.downloadLink,i="mp3"===e.type&&e.audioUrl;return(0,m.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen  p-5",children:(0,m.jsxs)("div",{className:"w-full max-w-lg",children:[(0,m.jsxs)("button",{onClick:()=>{t("sermons")},className:"flex items-center text-white mb-4 hover:text-gray-300",children:[(0,m.jsx)(d.A,{size:24}),(0,m.jsx)("span",{className:"ml-2",children:"Back to Sermon List"})]}),(0,m.jsx)("h1",{className:"text-white text-3xl mb-4",children:"Sermon Audio"}),(0,m.jsx)("h2",{className:"text-gray-400 text-xl mb-8 text-center",children:e.title}),(0,m.jsxs)("button",{onClick:()=>{i&&(n(!0),window.open(i,"_blank"),n(!1))},className:"flex items-center justify-center bg-primary text-white text-lg py-4 px-6 rounded-full mb-6 w-full hover:bg-secondary disabled:opacity-50",disabled:!i,children:[(0,m.jsx)(u.A,{size:32}),(0,m.jsx)("span",{className:"ml-2",children:"Play"})]}),(0,m.jsx)("button",{onClick:()=>{i?(n(!0),window.open(i,"_blank"),n(!1)):alert("Download link not available")},className:"flex items-center justify-center bg-primary text-white text-lg py-4 px-6 rounded-full mb-6 w-full hover:bg-secondary disabled:opacity-50",disabled:s||!a,children:s?(0,m.jsx)("div",{children:"Opening..."}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x.A,{size:32}),(0,m.jsx)("span",{className:"ml-2",children:"Download"})]})}),i&&(0,m.jsx)("audio",{ref:l,src:i,className:"w-full",controls:!0,children:"Your browser does not support the audio element."})]})})};var g=s(9097),p=s(6464),f=s(6953),b=s(7669),y=s(7200),j=s(3546);const v=e=>{let{showSearch:t,onClose:s,onSearch:n,searchQuery:l}=e;const[a,o]=(0,r.useState)(""),i=(0,r.useRef)(null);(0,r.useEffect)((()=>{t&&i.current&&i.current.focus()}),[t]);return(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ".concat(t?"opacity-100 z-50":"opacity-0 pointer-events-none"),children:(0,m.jsx)("div",{className:"flex items-start justify-center pt-16",children:(0,m.jsxs)("div",{className:"bg-[#202425] rounded-lg p-4 w-full max-w-2xl mx-4 transform transition-transform duration-300 ".concat(t?"translate-y-0":"-translate-y-full"),children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)(f.A,{className:"text-gray-400",size:20}),(0,m.jsx)("input",{ref:i,type:"text",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key?n(a):"Escape"===e.key&&s()},placeholder:"Search in sermon...",className:"flex-1 bg-transparent border-none outline-none text-white placeholder-gray-400 text-lg"}),(0,m.jsx)("button",{onClick:()=>n(a),className:"p-2 bg-gray-800 rounded-full text-text transition-colors italic",children:"Go"}),(0,m.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:(0,m.jsx)(b.A,{className:"text-gray-400",size:20})})]}),l&&(0,m.jsx)("div",{className:"mt-2 text-sm text-gray-400",children:"Press Enter to jump to matches"})]})})})};var N=s(6989);const w=e=>{let{sermon:t}=e;return(0,m.jsxs)(i.A,{className:"absolute right-0 mr-14 mt-24 bg-primary text-white w-64 shadow-lg",bordered:!1,children:[(0,m.jsx)("h3",{className:"text-lg font-bold mb-2",children:t.title}),(0,m.jsxs)("div",{className:"text-sm space-y-2",children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{className:"font-medium",children:"Location:"})," ",t.location]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{className:"font-medium",children:"Year:"})," ",t.year||"N/A"]}),(0,m.jsxs)("p",{children:[(0,m.jsx)("span",{className:"font-medium",children:"Type:"})," ",t.type]})]})]})},k=e=>{let{show:t,onClose:s}=e;return(0,r.useEffect)((()=>{if(t){const e=setTimeout(s,2e3);return()=>clearTimeout(e)}}),[t,s]),(0,m.jsx)(j.N,{children:t&&(0,m.jsx)(y.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"absolute z-30 bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg",children:"Progress saved successfully! \u2713"})})};v.propTypes={showSearch:a().bool.isRequired,onClose:a().func.isRequired,onSearch:a().func.isRequired,searchQuery:a().string};const S=e=>{var t;let{background:s,setBackground:l}=e;const{selectedMessage:a,searchQuery:d,setSearchQuery:u,settings:x,setRecentSermons:j}=(0,r.useContext)(o.u),[S,C]=(0,r.useState)(!1),[A,E]=(0,r.useState)((null===a||void 0===a?void 0:a.lastRead)||0),z=(0,r.useRef)(null),[R,I]=(0,r.useState)(0),[T,q]=(0,r.useState)(!0),[B,M]=(0,r.useState)(!1),[P,W]=(0,r.useState)(!1),L=e=>{const t=e.split(/Endnote/gi);return(0,m.jsx)("span",{children:t.map(((e,t,s)=>t<s.length-1?(0,m.jsxs)(r.Fragment,{children:[e,(0,m.jsx)("span",{className:"bg-yellow-500 text-black px-1 rounded",title:"William branham qoute.\ud83d\udddd\ufe0f\ud83d\udddd\ufe0f WMB qoute ends when you dont find the paragraph numbers anymore",children:"Endnote"})]},t):e))})},O=(0,r.useCallback)(((e,t)=>{if(null===t||void 0===t||!t.trim())return(0,m.jsx)("span",{children:e});const s=new RegExp("(".concat(t,")"),"gi"),n=e.split(s);return(0,m.jsx)("span",{children:n.map(((e,t)=>s.test(e)?(0,m.jsx)("mark",{className:"text-green-400 border border-green-600 rounded-md",style:{backgroundColor:"green",padding:"4px"},children:e},t):(0,m.jsx)("span",{children:e},t)))})}),[]),Q=(0,r.useMemo)((()=>["./pic1.jpg","./picc.jpg","./pica.jpg","./picd.jpg","./picb.jpg"]),[]);(0,r.useEffect)((()=>{const e=setInterval((()=>{const e=Math.floor(Math.random()*Q.length);I(e)}),5e4);return()=>clearInterval(e)}),[R,Q]),(0,r.useEffect)((()=>{if(d&&z.current){const e=z.current.querySelectorAll("mark");e.length>0&&e[0].scrollIntoView({behavior:"smooth",block:"center"})}const e=setTimeout((()=>u("")),6e4);return()=>clearTimeout(e)}),[d,u]),(0,r.useEffect)((()=>{const e=z.current;if(!e)return;const t=()=>{E(e.scrollTop)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}),[]),(0,r.useEffect)((()=>{if(null===a||void 0===a||!a.id)return;return()=>{(()=>{const e=JSON.parse(localStorage.getItem("recentSermons"))||[],t=e.findIndex((e=>e.id===a.id));if(-1!==t){const s=[...e];s[t]=(0,n.A)((0,n.A)({},a),{},{lastRead:A}),localStorage.setItem("recentSermons",JSON.stringify(s)),j(s)}})()}}),[a,A,j]);const F=()=>{C(!S),S&&u("")},J=s?{backgroundImage:"linear-gradient(to bottom,\n          rgba(0, 0, 0, 0.5) 0%,\n          rgba(0, 0, 0, 5) 40%),\n          url(".concat(Q[R]||"./pic3.jpg",")")}:{};return(0,m.jsxs)("div",{className:"",children:[(0,m.jsx)(v,{showSearch:S,onClose:F,onSearch:e=>{u(e),C(!1)},searchQuery:d}),(0,m.jsx)(k,{show:B,onClose:()=>M(!1)}),(0,m.jsx)(y.P.div,{className:"bg-cover bg-white dark:bg-primary bg-center flex flex-col p-5 relative pb-14",style:"text"===a.type?J:{backgroundPosition:"center",backgroundSize:"contain",backgroundImage:'linear-gradient(to bottom,\n                rgba(42, 42, 42, 0.5) 80%,\n                rgba(42, 42, 42, .4) 90%),\n                url("./icon.png")'},children:(0,m.jsxs)("div",{className:"w-full mb-5 h-[90vh] ",children:["text"===a.type&&(0,m.jsxs)("div",{className:"absolute flex items-center justify-center right-0 mr-14 gap-2 p-2 rounded-l-full bg-primary mt-10",children:[(0,m.jsx)("button",{className:"rounded-full h-10 w-10 hover:cursor-pointer hover:scale-125 duration-300 bg-secondary text-white font-bold text-center flex items-center justify-center",title:"Save progress",onClick:()=>{if(null===a||void 0===a||!a.id)return;const e=JSON.parse(localStorage.getItem("recentSermons"))||[],t=e.findIndex((e=>e.id===a.id));if(-1!==t){const s=[...e];s[t]=(0,n.A)((0,n.A)({},a),{},{lastRead:A}),localStorage.setItem("recentSermons",JSON.stringify(s)),j(s)}M(!0)},children:"\ud83d\udcdd"}),(0,m.jsx)("button",{className:"rounded-full h-10 w-10 hover:cursor-pointer hover:scale-125 duration-300 bg-secondary text-white font-bold text-center flex items-center justify-center",title:"Toggle sermon details",onClick:()=>{W((e=>!e))},children:(0,m.jsx)(g.A,{size:20})}),(0,m.jsx)("button",{className:"rounded-full h-10 w-10 hover:cursor-pointer hover:scale-125 duration-300 bg-secondary text-white font-bold text-center flex items-center justify-center",title:"Toggle background",onClick:()=>l(!s),children:s?"SB":(0,m.jsx)(p.A,{})}),(0,m.jsx)("button",{className:"rounded-full h-10 w-10 hover:cursor-pointer hover:scale-125 duration-300 bg-secondary text-white font-bold text-center flex items-center justify-center",title:"Search in sermon",onClick:F,children:(0,m.jsx)(f.A,{})}),(0,m.jsx)(N.A,{})]}),P&&"text"===a.type&&(0,m.jsx)(w,{sermon:a}),(0,m.jsx)("div",{ref:z,className:"rounded-lg p-8 h-[90vh] overflow-y-scroll text-text",style:{scrollbarWidth:"thin",scrollbarColor:"#4B5563 #202020"},children:"text"===a.type?(0,m.jsxs)("div",{className:"w-full",children:[a.lastRead&&T&&(0,m.jsx)(i.A,{title:"Welcome Back!",bordered:!1,className:"absolute right-0 mr-14 mb-4 bg-green-300 text-text",style:{width:300,textAlign:"center"},actions:[(0,m.jsx)(c.Ay,{type:"outline",className:"text-green-300 bg-green-700 ",onClick:()=>{var e;e=A,z.current&&z.current.scrollTo({top:e,behavior:"smooth"}),q(!1)},children:"Continue"},"continue"),(0,m.jsx)(c.Ay,{type:"outline",onClick:()=>{q(!1)},className:"text-white bg-green-700 hover:text-gray-300",children:(0,m.jsx)(b.A,{size:18})},"close")],children:(0,m.jsx)("p",{className:"text-black",children:"You left off at this point in the sermon."})}),(0,m.jsx)("p",{className:" text-3xl font-serif text-gray-900 dark:text-text font-bold underline",children:a.title}),(0,m.jsx)("p",{className:" font-serif italic text-gray-900 dark:text-text",children:null===a||void 0===a?void 0:a.location}),"\ud83d\udd0a",null===(t=a.sermon)||void 0===t?void 0:t.split("\n\n").map(((e,t)=>(0,m.jsx)("p",{className:"mb-6 leading-relaxed text-gray-900 dark:text-text font-cursive pt-3 ",style:{fontFamily:x.fontFamily,fontWeight:x.fontWeight,fontSize:"".concat(x.fontSize,"px"),fontStyle:x.fontStyle},children:d?O(e,d):L(e)},t))),"\ud83d\udddd\ufe0f"]}):(0,m.jsx)(h,{})})]})})]})}}}]);
//# sourceMappingURL=171.b4b2d31d.chunk.js.map